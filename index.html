<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Practice Recorder</title>

    <link rel="icon" href="assets/favicon.ico" />
    <link rel="stylesheet" href="assets/style.css" />
  </head>
  <body>
    <div class="container">
      <div class="row align-items-end">
        <div class="col-6">
          <h1>Practice Recorder</h1>
        </div>
        <div class="col text-right align-middle" id="user"></div>
        <div class="col-1 text-right">
          <button class="btn" type="button" id="hamburger" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
            <i class="bi bi-list bi-small" style="display:inline-block"></i>
          </button>
        </div>
      </div>
    <div class="container text-center" id="main">
      <div class="row">
        <div class="col">
          <i id="record" class="bi bi-record-circle" style="display:inline-block"></i>
          <i id="recording" class="bi bi-record-circle blinking" style="display:none"></i>
          <i id="play" class="bi bi-play-circle" style="display:none"></i>
          <i id="playing" class="bi bi-play-circle blinking" style="display:none"></i>
        </div>
      </div>
      <div class="collapse show" id="visualization">
        <div class="row text-right">
          <div class="col" id="visualization-stats"></div>
        </div>
        <div class="card card-body visualization-body">
          <div class="row">
            <div class="col">
              <canvas id="waveform-canvas" width="800" style="height:300px"></canvas>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-3" id="rec-speed-label">
          Recording Speed:
        </div>
        <div class="col input-group">
          <button class="btn" id="rec-speed-minus" type="button" tabindex="-1">-</button>
          <input type="range" class="form-range form-control" id="rec-speed" min="0" max="100" value="100" step="1">
          <button class="btn" id="rec-speed-plus" type="button" tabindex="-1">+</button>
        </div>
        <div class="col-3">
          Playback Speed:
        </div>
        <div class="col input-group">
          <button class="btn" id="playback-minus" type="button" tabindex="-1">-</button>
          <input type="text" class="form-control" id="playback-numer" value="1" pattern="[0-9]*" tabindex="1">
          <span class="input-group-text">/</span>
          <input type="text" class="form-control" id="playback-denom" value="4" pattern="[0-9]*" tabindex="2">
          <button class="btn" id="playback-plus" type="button" tabindex="-1">+</button>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <div class="row">
            <div class="container" id="blocks">
            </div>
          </div>
          <div class="row">
            <div class="dropdown">
              <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Add Block
              </button>
              <ul class="dropdown-menu" id="add-block">
                <li><button class="dropdown-item" type="button" value="metronome">Set Metronome</button></li>
                <li><button class="dropdown-item" type="button" value="pattern">Set Beat Pattern</button></li>
                <li><button class="dropdown-item" type="button" value="subdivision">Set Subdivision</button></li>
                <li><button class="dropdown-item" type="button" value="beats">Beats</button></li>
                <li><button class="dropdown-item" type="button" value="measures">Measures</button></li>
                <li><button class="dropdown-item" type="button" value="duration">Duration</button></li>
                <li><button class="dropdown-item" type="button" value="pause">Pause</button></li>
                <li><button class="dropdown-item" type="button" value="accelerando">Accelerando</button></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div>
        <button class="btn" id="download" type="button">Download</button>
      </div>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasRightLabel">Welcome to Practice Recorder!</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body container">
        <h6>General</h6>
        <div class="offcanvas-section">
          <!-- auto play -->
          <div class="row">
            <div class="col-8">
              Auto Play:
            </div>
            <div class="col input-group form-check form-switch">
              <input class="form-check-input" id="auto-play" type="checkbox" role="switch" checked>
            </div>
          </div>
        </div>
        <hr></hr>
        <h6>Metronome</h6>
        <div class="offcanvas-section">
          <!-- recording metronome -->
          <div class="row">
            <div class="col-8">
              Recording Metronome:
            </div>
            <div class="col input-group form-check form-switch">
              <input class="form-check-input" id="rec-metronome-enabled" type="checkbox" role="switch" data-bs-toggle="collapse" data-bs-target=".rec-metronome" tabindex="3" checked>
            </div>
          </div>
          <!-- playback metronome -->
          <div class="row">
            <div class="col-8">
              Playback Metronome:
            </div>
            <div class="col input-group form-check form-switch">
              <input class="form-check-input" id="play-metronome-enabled" type="checkbox" role="switch" data-bs-toggle="collapse" data-bs-target=".play-metronome" tabindex="4" checked>
            </div>
          </div>
          <!-- click flash -->
          <div class="row">
            <div class="col-8">
              Click Flash:
            </div>
            <div class="col input-group form-check form-switch">
              <input class="form-check-input" id="rec-click-flash" type="checkbox" role="switch">
            </div>
          </div>
          <!-- click silencing -->
          <div class="row">
            <div class="col-5" id="rec-silencing-label">
              Random Click Silencing:
            </div>
            <div class="col input-group">
              <button class="btn" id="rec-silencing-minus" type="button" tabindex="-1">-</button>
              <input type="range" class="form-range form-control" id="rec-silencing" min="0" max="100" value="0" step="1">
              <button class="btn" id="rec-silencing-plus" type="button" tabindex="-1">+</button>
            </div>
          </div>
        </div>
        <hr></hr>
        <h6>Visualization</h6>
        <div class="offcanvas-section">
          <!-- waveform -->
          <div class="row">
            <div class="col-8">
              Waveform:
            </div>
            <div class="col input-group form-check form-switch">
              <input class="form-check-input" id="visualization-enabled" type="checkbox" role="switch" data-bs-toggle="collapse" data-bs-target="#visualization" tabindex="10" checked>
            </div>
          </div>
          <div class="row">
            <div class="col-8">
              Tuner:
            </div>
            <div class="col input-group form-check form-switch">
              <input class="form-check-input" id="tuner-enabled" type="checkbox" role="switch" tabindex="11">
            </div>
          </div>
          <div class="row">
            <div class="col-8">
              Pitch Detection:
            </div>
            <div class="col input-group form-check form-switch">
              <input class="form-check-input" id="pitch-detection-enabled" type="checkbox" role="switch" tabindex="11">
            </div>
          </div>
        </div>
        <hr></hr>
        <h6>Tools</h6>
        <div class="offcanvas-section">
          <!-- tapper -->
          <button id="tapper" class="btn btn-outline-secondary">
            Metronome Tapper
            <span id="tapper-display" class="badge text-bg-secondary"></span>
          </button>
          <!-- drone -->
          <div class="input-group">
            <button class="btn btn-outline-secondary" id="drone" type="button" tabindex="-1">Drone</button>
            <select class="form-select border-secondary" id="drone-pitch">
              <option value="C">C</option>
              <option value="Db">C#</option>
              <option value="D">D</option>
              <option value="Eb">D#</option>
              <option value="E">E</option>
              <option value="F">F</option>
              <option value="Gb">F#</option>
              <option value="G">G</option>
              <option value="Ab">G#</option>
              <option value="A" selected>A</option>
              <option value="Bb">Bb</option>
              <option value="B">B</option>
            </select>
            <select class="form-select border-secondary" id="drone-octave">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3" selected>3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
            </select>
          </div>
        </div>
        <hr></hr>
        <h6>Saves</h6>
        <div class="offcanvas-section">
          <div id="saves"></div>
          <div class="input-group" id="save-new-group-1">
            <button class="btn btn-outline-secondary" id="save-new" type="button">
              New
            </button>
            <button class="btn btn-outline-secondary" id="save-delete" type="button">
              Delete
            </button>
          </div>
          <div class="input-group" id="save-new-group-2" hidden>
            <input type="text" class="form-control" id="save-name" placeholder="Name">
            <button class="btn btn-outline-primary" id="save-submit" type="button">
              Save
            </button>
            <button class="btn btn-outline-danger" id="save-cancel" type="button">
              Cancel
            </button>
          </div>
        </div>
        <hr></hr>
        <h6>Advanced</h6>
        <div class="offcanvas-section">
          <!-- latency -->
          <div class="row">
            <div class="col-5">
              Latency Compensation:
            </div>
            <div class="col input-group">
              <button class="btn" id="latency-compensator-minus" type="button" tabindex="-1">-</button>
              <input type="text" class="form-control" id="latency-compensator-val" value="145" pattern="[0-9]*" tabindex="9">
              <button class="btn" id="latency-compensator-plus" type="button" tabindex="-1">+</button>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>
    <div id="click-flash-box" hidden></div>

    <script src="https://accounts.google.com/gsi/client" async></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <script src="src/main.ts" type="module"></script>
  </body>
</html>
